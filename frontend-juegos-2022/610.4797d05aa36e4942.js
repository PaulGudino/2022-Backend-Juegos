"use strict";(self.webpackChunkFrontend_Juegos_2022=self.webpackChunkFrontend_Juegos_2022||[]).push([[610],{3610:(bt,x,l)=>{l.r(x),l.d(x,{JuegoModule:()=>yt});var d=l(6895),t=l(4650),h=l(1390);let P=(()=>{class n{constructor(e){this.router=e}canActivate(e,i){return!!sessionStorage.getItem(e.data.Validate_game)||(this.router.navigate(["/juego"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(h.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=l(5861),b=l(3276),G=l(2990),v=l(4870),A=l(7637),Y=l(1782),k=l(3021),w=l(2215),g=l(9808),z=l(1172),U=l(9760),V=l(3867),D=l(8041),B=l(1131),C=l(529),L=l(9406),M=l(9661);let I=(()=>{class n{constructor(e,i,o){this.http=e,this.puente=i,this.publicityGame=o,this.publicityGameList=[],this.columna2=[5,6,7,8,9,10,1,2,3,4],this.columna3=[3,4,5,6,7,8,9,10,1,2],this.publicityGameListCol2=[],this.publicityGameListCol3=[],this.url=this.puente.geturl()}shuffle(e){for(let i=e.length-1;i>0;i--){let o=Math.floor(Math.random()*(i+1));[e[i],e[o]]=[e[o],e[i]]}if(1==e[0]){let i=e[0];e[0]=e[1],e[1]=i}return e}getThemeGame(e){e||(this.columna2=this.shuffle(this.columna2),this.columna3=this.shuffle(this.columna3)),this.publicityGame.getAllPublicityGame().subscribe(i=>{this.publicityGameList=i,this.columna2.map(o=>{i.forEach(a=>{a.id==o&&this.publicityGameListCol2.push(a)})}),this.columna3.map(o=>{i.forEach(a=>{a.id==o&&this.publicityGameListCol3.push(a)})})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(C.eN),t.LFG(L.Q),t.LFG(M.D))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var J=l(3398);let f=(()=>{class n{constructor(e,i,o,a,s,c,u,p){this.ticketService=e,this.matchService=i,this.gameDataSrv=o,this.awardConditionSrv=a,this.awardSrv=s,this.game=c,this.theme=u,this.probabilityService=p,this.match={},this.attempts=0,this.winnersLimit=0,this.winProb=0,this.winner=!1,this.winFirstTime=!1,this.winAwardImage=""}verifyTicket(e){var i=this;return(0,m.Z)(function*(){const o=yield(0,g.n)(i.ticketService.getFilter("?&state=Disponible&qr_code_digits="+e));if(o.length>0){let a,s,c;i.ticket=o[0];const u=yield(0,g.n)(i.game.getById(1));return a=new Date(i.ticket.date_created_nf),s=new Date(u.start_date_nf),c=new Date(u.end_date_nf),s<=a&&c>=a}return!1})()}playGame(){var e=this;return(0,m.Z)(function*(){yield e.deleteAwardConditionPast(),yield e.getProbabilityData();let i=yield e.getAwardConditionToday();if(i&&i.length>0){let o=i[0];e.awardSrv.getAwardbyId(o.award_id).subscribe(a=>{e.winCase(o.award_id,o.id,!0),e.winAwardImage=a.imagen})}else if(yield e.checkLimitWinners())e.changeStateTicket(e.ticket.id),e.createMatch("false","false",e.ticket.id,null),e.setWinnerState(!1),e.theme.getThemeGame(e.winner);else{let o=yield e.getPrize();if(o){let a=o[0];e.winCase(a.id,null,!1),e.winAwardImage=a.imagen}else e.changeStateTicket(e.ticket.id),e.createMatch("false","false",e.ticket.id,null),e.setWinnerState(!1),e.theme.getThemeGame(e.winner)}})()}winCase(e,i,o){this.createMatch("true","false",this.ticket.id,e),this.changeStateTicket(this.ticket.id),this.setWinnerState(!0),o?this.wonAwardCondition(e,i):this.wonAward(e),this.theme.getThemeGame(this.winner)}getAwardConditionToday(){var e=this;return(0,m.Z)(function*(){let i=new Date,o=e.gameDataSrv.DateFormat(i),a="?is_approved=false&start_date__lte="+o+"&end_date__gte="+o;return yield(0,g.n)(e.awardConditionSrv.getAwardConditionFilter(a))})()}winnedAward(e){return(0,m.Z)(function*(){})()}wonAward(e){var i=this;return(0,m.Z)(function*(){let o=new FormData;o.append("won_award","true"),yield(0,g.n)(i.awardSrv.winAward(e,o))})()}wonAwardCondition(e,i){var o=this;return(0,m.Z)(function*(){let a=new FormData;a.append("won_award","true"),yield(0,g.n)(o.awardSrv.winAwardCondition(e,a));let s=new FormData;s.append("state","true"),yield(0,g.n)(o.awardConditionSrv.changeState(i,s))})()}changeStateTicket(e){var i=this;return(0,m.Z)(function*(){let o=new FormData;o.append("state","true"),yield(0,g.n)(i.ticketService.changeStateTicket(e,o))})()}deleteAwardConditionPast(){var e=this;return(0,m.Z)(function*(){let o=yield(0,g.n)(e.awardConditionSrv.getAwardConditionFilter("?is_approved=false")),a=new Date;for(let s in o)new Date(o[s].end_date_nf)<a&&(yield(0,g.n)(e.awardConditionSrv.deleteAwardCondition(o[s].id)))})()}getPrize(){var e=this;return(0,m.Z)(function*(){let a=Math.floor(1001*Math.random())+0,s="";if(a<=10*e.winProb){a=Math.floor(1001*Math.random())+0,a<=800?s="Com\xfan":a<=900?s="Rara":a<=990?s="\xc9pica":a<=1e3&&(s="Legendaria");let c=yield e.getAwardsCategory(s);return c.length>0?c:null}return null})()}getAwardsCategory(e){var i=this;return(0,m.Z)(function*(){return(yield(0,g.n)(i.awardSrv.getFilterAward("?is_active=true&initial_stock__gt=0&category="+e))).filter(s=>s.category==e)})()}checkLimitWinners(){var e=this;return(0,m.Z)(function*(){let i=new Date,o=e.gameDataSrv.DateFormat(i).split("T")[0];return(yield e.getWinnMatchesToday(o)).length>=e.winnersLimit&&(e.setWinnerState(!1),!0)})()}getWinnMatchesToday(e){var i=this;return(0,m.Z)(function*(){let o="?win_match=true&date_created__date__range="+e+"%2C"+e;return yield(0,g.n)(i.matchService.getMatchFilter(o))})()}createMatch(e,i,o,a){let s={ticket:o,award:a,win_match:e,delivered:i};this.match=s,this.matchService.postMatch(s)}setWinnerState(e){this.winner=e}decreaseAttemptCount(){this.attempts--}getProbabilityData(){var e=this;return(0,m.Z)(function*(){let i=yield(0,g.n)(e.probabilityService.getProbabilites());e.winProb=i.percent_win,e.attempts=i.attempts_limit,e.winnersLimit=i.winners_limit})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(z.w),t.LFG(U.Q),t.LFG(V.V),t.LFG(D.r),t.LFG(B.q),t.LFG(k.h),t.LFG(I),t.LFG(J.g))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Q=(()=>{class n{constructor(e,i){this.http=e,this.puente=i,this.url=this.puente.geturl()}setAudioFile(e){this.audioFile=e}getAudioFile(e){return this.audioFile}getAll(){return this.http.get(this.url+"api/audio/")}getById(e){return this.http.get(this.url+"api/audio/"+e+"/")}post(e){return this.http.post(this.url+"api/audio/",e)}put(e,i){return this.http.put(this.url+"api/audio/"+e+"/",i)}delete(e){return this.http.delete(this.url+"api/audio/"+e+"/")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(C.eN),t.LFG(L.Q))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T=(()=>{class n{constructor(){this.title="Empezar",this.fontSize="1.6rem",this.styledPadding="1rem 1.5rem",this.color="white",this.color_background="red",this.disabled=!1}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-generic-button"]],inputs:{title:"title",fontSize:"fontSize",styledPadding:"styledPadding",color:"color",color_background:"color_background",disabled:"disabled"},decls:2,vars:10,consts:[[1,"generic-btn",3,"disabled"]],template:function(e,i){1&e&&(t.TgZ(0,"button",0),t._uU(1),t.qZA()),2&e&&(t.Udp("font-size",i.fontSize)("padding",i.styledPadding)("color",i.color)("background",i.color_background),t.Q6J("disabled",i.disabled),t.xp6(1),t.hij(" ",i.title,"\n"))},styles:[".generic-btn[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:1.2rem;margin:0;text-align:center;border-radius:35px;outline:none;border:none}"]}),n})();const N=["scrollContainer"];function j(n,r){if(1&n&&(t.TgZ(0,"figure",6),t._UZ(1,"img",7),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH)}}let S=(()=>{class n{constructor(e){this.publicity=e,this.publicityList=[],this.animationCount=0,this.isTop=!0,this.timeIntervalTop=1e3,this.timeIntervalBottom=1e3}ngOnInit(){this.publicity.getPublicityConfigTop().subscribe(e=>{this.timeIntervalTop=1e3*e.time_display,this.publicity.getPublicityConfigBottom().subscribe(i=>{this.timeIntervalBottom=1e3*i.time_display,this.createInterval(this.isTop?this.timeIntervalTop:this.timeIntervalBottom)})})}createInterval(e){let i;i=setInterval(()=>{this.scrollContainer.nativeElement.style.transform=`translateX(${-100*this.animationCount}%)`,this.scrollContainer.nativeElement.style.transition="transform .3s cubic-bezier(0.61, 1, 0.88, 1)",this.animationCount==this.publicityList.length?setTimeout(()=>{this.scrollContainer.nativeElement.style.transform="translateX(0px)",this.scrollContainer.nativeElement.style.transition="transform 0.3s",this.animationCount=0}):this.animationCount<this.publicityList.length&&this.animationCount++},e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-publicity"]],viewQuery:function(e,i){if(1&e&&t.Gf(N,5),2&e){let o;t.iGM(o=t.CRH())&&(i.scrollContainer=o.first)}},inputs:{publicityList:"publicityList",isTop:"isTop"},decls:6,vars:1,consts:[[1,"container-fluid","publicity_container","p-0"],[1,"scroll-container"],["scrollContainer",""],["class","publicity_img-container",4,"ngFor","ngForOf"],["controls","None","loop","","hidden",""],["src","./assets/audio/idle_music.mp3","type","audio/mp3"],[1,"publicity_img-container"],["alt","publicity-img",1,"publicity_img",3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1,2),t.YNc(3,j,2,1,"figure",3),t.qZA(),t.TgZ(4,"audio",4),t._UZ(5,"source",5),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngForOf",i.publicityList))},dependencies:[d.sg],styles:[".publicity_container[_ngcontent-%COMP%]{background-color:#0ff;position:relative;height:15vh;display:flex;overflow:hidden;scroll-behavior:smooth}.scroll-container[_ngcontent-%COMP%]{display:flex;width:100%;scroll-behavior:smooth;align-items:center}.publicity_img-container[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{padding:0;margin:0}.publicity_img-container[_ngcontent-%COMP%]{min-width:100%;height:100%}.publicity_img[_ngcontent-%COMP%]{width:100%;height:100%}"]}),n})(),q=(()=>{class n{constructor(e,i,o,a,s,c,u,p,_,Z){this.dashPublicity=e,this.themeService=i,this.styles=o,this.publicity=a,this.router=s,this.AuthSrv=c,this.GameSrv=u,this.confirmDialog=p,this.Gamelogic=_,this.audioService=Z,this.backgroundImgUrl="",this.buttonTitle="",this.logoImage="",this.videoUrl="",this.boxes_images=0,this.design_images=0,this.audio=new Audio,this.audioArray=[]}ngOnInit(){var e=this;return(0,m.Z)(function*(){yield e.auth(),e.validateSlot(),sessionStorage.removeItem("juego_scan"),sessionStorage.removeItem("juego_play"),e.publicity.getPublicityTopList().subscribe(i=>{i.length>0&&(e.dashPublicity.loadTopData(i),e.publicity.getPublicityBottomList().subscribe(o=>{e.dashPublicity.loadBottomData(o)})),e.themeService.getDesignInformation().subscribe(o=>{e.styles.loadData(o[0]),e.buttonTitle=e.styles.get_title_button_screensaver(),e.logoImage=e.styles.get_image_logo_game(),e.videoUrl=e.styles.get_video_screensaver()})})})()}goScan(){var e=this;return(0,m.Z)(function*(){yield e.validateSlot(),10==e.boxes_images&&3==e.design_images?(e.router.navigate(["/juego/scan"]),sessionStorage.setItem("juego_scan","juego_scan")):e.confirmDialog.error(["Revise que esten todas las im\xe1genes de las casillas","Revise que este el contenedor del juego","Revise que este el logo del juego","Revise que este la imagen al ganar"])})()}auth(){var e=this;return(0,m.Z)(function*(){let i=new FormData;i.append("username","admin"),i.append("password","admin"),e.AuthSrv.auth_token(i).subscribe(o=>{sessionStorage.setItem("token",o.access),sessionStorage.setItem("refresh",o.refresh)})})()}validateSlot(){var e=this;return(0,m.Z)(function*(){e.GameSrv.getPublicityGame().subscribe(i=>{for(let o of i)o.image&&(e.boxes_images+=1)}),e.GameSrv.getDesign().subscribe(i=>{for(let o of i)o.image_machine_game&&(e.design_images+=1),o.image_logo_game&&(e.design_images+=1),o.image_winner&&(e.design_images+=1)})})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.E),t.Y36(G.f),t.Y36(v.T),t.Y36(A.U),t.Y36(h.F0),t.Y36(Y.e),t.Y36(k.h),t.Y36(w.D),t.Y36(f),t.Y36(Q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-juego"]],decls:7,vars:10,consts:[[3,"publicityList"],[1,"container-fluid","home_container","p-0","m-0"],[1,"home-image_container",3,"autoplay","muted","loop","src"],[1,"home-btn_container"],[1,"home_btn",3,"title","fontSize","styledPadding","click"],[3,"publicityList","isTop"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-publicity",0),t.TgZ(2,"div",1),t._UZ(3,"video",2),t.TgZ(4,"div",3)(5,"app-generic-button",4),t.NdJ("click",function(){return i.goScan()}),t.qZA()()(),t._UZ(6,"app-publicity",5),t.qZA()),2&e&&(t.xp6(1),t.Q6J("publicityList",i.dashPublicity.getTopPublicityList()),t.xp6(2),t.Q6J("autoplay",!0)("muted","muted")("loop",!0)("src",i.videoUrl,t.LSH),t.xp6(2),t.Q6J("title",i.buttonTitle)("fontSize","2.8rem")("styledPadding","3.4rem 6.6rem"),t.xp6(1),t.Q6J("publicityList",i.dashPublicity.getBottomPublicityList())("isTop",!1))},dependencies:[T,S],styles:[".home_container[_ngcontent-%COMP%]{position:relative;width:100%;height:70vh;overflow-y:hidden;overflow-x:hidden}.home-image_container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;background-color:#3b3b3b}.home-logo__container[_ngcontent-%COMP%]{position:absolute;min-width:20rem;height:15rem;left:calc(50% - 203px);z-index:2}img[_ngcontent-%COMP%]{width:100%;height:100%}.home_background[_ngcontent-%COMP%]{width:100%;height:100%;max-height:77.1rem}.home-shadow[_ngcontent-%COMP%]{background:#000000a1;height:100%;width:100%;position:absolute;top:0}.home-btn_container[_ngcontent-%COMP%]{width:100%;position:absolute;display:flex;justify-content:center;bottom:calc(10% + 10px)}"]}),n})(),O=(()=>{class n{constructor(){this.code=""}getCode(){return this.code}setCode(e){this.code=this.code+e}deleteLastValue(){this.code=this.code.substring(0,this.code.length-1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=l(4006),E=l(7392);const K=function(){return{"font-size":"56px",height:"43px",width:"68px"}};let H=(()=>{class n{constructor(e){this.KeyControllerService=e}ngOnInit(){}getButtonValue(e){let i=e.target;i.textContent&&this.KeyControllerService.setCode(i.textContent.trim())}deleteValue(){this.KeyControllerService.deleteLastValue()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-keyboard"]],decls:29,vars:2,consts:[[1,"container-fluid","text-center"],[1,"keyboard-container"],[1,"row","keyboard-row"],[1,"col","btn",3,"click"],[1,"col-7","btn",3,"click"],["value","delete",1,"col-4","btn",3,"click"],[3,"ngStyle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(4," 1 "),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(6," 2 "),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(8," 3 "),t.qZA()(),t.TgZ(9,"div",2)(10,"button",3),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(11," 4 "),t.qZA(),t.TgZ(12,"button",3),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(13," 5 "),t.qZA(),t.TgZ(14,"button",3),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(15," 6 "),t.qZA()(),t.TgZ(16,"div",2)(17,"button",3),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(18," 7 "),t.qZA(),t.TgZ(19,"button",3),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(20," 8 "),t.qZA(),t.TgZ(21,"button",3),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(22," 9 "),t.qZA()(),t.TgZ(23,"div",2)(24,"button",4),t.NdJ("click",function(a){return i.getButtonValue(a)}),t._uU(25," 0 "),t.qZA(),t.TgZ(26,"button",5),t.NdJ("click",function(){return i.deleteValue()}),t.TgZ(27,"mat-icon",6),t._uU(28,"keyboard_backspace"),t.qZA()()()()()),2&e&&(t.xp6(27),t.Q6J("ngStyle",t.DdM(1,K)))},dependencies:[d.PC,E.Hw],styles:[".btn[_ngcontent-%COMP%]{background-color:#fff;border-radius:45px;padding:1.3rem .2rem;font-size:2.8rem}.keyboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;width:34rem;height:32rem;font-size:1.6rem}.keyboard-row[_ngcontent-%COMP%]{gap:1.6rem}"]}),n})();const $=function(n,r,e){return{"home-logo__container":n,logo__container:r,"logo__container-background":e}};let F=(()=>{class n{constructor(){this.height="15rem",this.isHome=!0,this.isBackground=!1,this.urlImage=""}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-logo"]],inputs:{height:"height",isHome:"isHome",isBackground:"isBackground",urlImage:"urlImage"},decls:2,vars:8,consts:[[1,"p-0","m-0",3,"ngClass"],["alt","home-logo",1,"p-0","m-0",3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"figure",0),t._UZ(1,"img",1),t.qZA()),2&e&&(t.Udp("height",i.height),t.Q6J("ngClass",t.kEZ(4,$,i.isHome,!i.isHome,i.isBackground)),t.xp6(1),t.Q6J("src",i.urlImage,t.LSH))},dependencies:[d.mk],styles:[".home-logo__container[_ngcontent-%COMP%]{position:absolute;height:15rem;width:47rem;left:calc(50% - 205px);top:calc(0% + 20px);z-index:2}.logo__container[_ngcontent-%COMP%]{position:absolute;height:15rem;top:2px;z-index:2}.logo__container-background[_ngcontent-%COMP%]{position:absolute;height:15rem;top:calc(38% + 20px);left:calc(50% - 364px);z-index:2}img[_ngcontent-%COMP%]{width:100%;height:100%}"]}),n})();function R(n,r){if(1&n&&(t.TgZ(0,"div",16)(1,"h2",17),t._uU(2),t.qZA(),t.TgZ(3,"p",18),t._uU(4),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.styles.get_scan_code_title()),t.xp6(2),t.hij(" ",e.styles.get_scan_code_description()," ")}}function W(n,r){1&n&&(t.TgZ(0,"div",16)(1,"h2",17),t._uU(2,"Ingrese el c\xf3digo"),t.qZA()())}function X(n,r){1&n&&(t.TgZ(0,"figure",19),t._UZ(1,"img",20),t.qZA())}function tt(n,r){1&n&&t._UZ(0,"app-keyboard")}let et=(()=>{class n{constructor(e,i,o,a,s,c){this.router=e,this.publicity=i,this.styles=o,this.keyController=a,this.gameLogic=s,this.confirmDialog=c,this.selectedInputCode=!1,this.scanState=!0,this.explication="Puedes escanear el c\xf3digo QR de tu ticket",this.code=this.keyController.getCode()}ngOnInit(){}changeView(){this.scanState=!1,this.keyController.setCode("")}continueToGame(){var e=this;return(0,m.Z)(function*(){""!=e.keyController.getCode()&&((yield e.gameLogic.verifyTicket(e.keyController.getCode()))?(e.gameLogic.playGame(),sessionStorage.setItem("juego_play","juego_play"),e.router.navigate(["/juego/play"])):e.confirmDialog.error(["El ticket que ingres\xf3 no existe o ya fu\xe9 reclamado, revise si la informacion ingresada es correcta","\xd3","La fecha disponible del ticket est\xe1 fuera del rango de disponibilidad del juego"]))})()}doSomething(){sessionStorage.removeItem("juego_scan")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.F0),t.Y36(b.E),t.Y36(v.T),t.Y36(O),t.Y36(f),t.Y36(w.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-scan-view"]],decls:17,vars:15,consts:[["contenteditable","true",1,"scan_container","p-0","m-0",3,"beforeunload"],[3,"publicityList"],[1,"container-menu"],["height","25rem",3,"isBackground","urlImage"],[1,"scan-shadow"],[1,"scan_menu-container"],[1,"menu-container_img-container"],["height","22rem",3,"urlImage","isHome"],["class","menu-info",4,"ngIf"],["class","menu-container_scan-img-container",4,"ngIf"],[4,"ngIf"],["type","text","onkeypress","return event.charCode >= 48 && event.charCode <= 57",1,"btn","menu__input",3,"ngModel","click","ngModelChange"],["codeInput","ngModel"],["title","Continuar",1,"mb-2",3,"fontSize","styledPadding","click"],["autoplay","","loop","","controls","None","hidden","","src","./assets/audio/playing_music.mp3",3,"volume"],[3,"publicityList","isTop"],[1,"menu-info"],[1,"scan_title"],[1,"explication-text"],[1,"menu-container_scan-img-container"],["src","../../../assets/img/codigoQR.png","alt","scan-logo",1,"menu-container_scan-img"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.NdJ("beforeunload",function(){return i.doSomething()},!1,t.Jf7),t._UZ(1,"app-publicity",1),t.TgZ(2,"div",2),t._UZ(3,"app-logo",3)(4,"div",4),t.TgZ(5,"div",5)(6,"div",6),t._UZ(7,"app-logo",7),t.qZA(),t.YNc(8,R,5,2,"div",8),t.YNc(9,W,3,0,"div",8),t.YNc(10,X,2,0,"figure",9),t.YNc(11,tt,1,0,"app-keyboard",10),t.TgZ(12,"input",11,12),t.NdJ("click",function(){return i.changeView()})("ngModelChange",function(a){return i.keyController.code=a}),t.qZA(),t.TgZ(14,"app-generic-button",13),t.NdJ("click",function(){return i.continueToGame()}),t.qZA()()(),t._UZ(15,"audio",14)(16,"app-publicity",15),t.qZA()),2&e&&(t.xp6(1),t.Q6J("publicityList",i.publicity.getTopPublicityList()),t.xp6(2),t.Q6J("isBackground",!0)("urlImage",i.styles.get_image_logo_game()),t.xp6(4),t.Q6J("urlImage",i.styles.get_image_logo_game())("isHome",!1),t.xp6(1),t.Q6J("ngIf",i.scanState),t.xp6(1),t.Q6J("ngIf",!i.scanState),t.xp6(1),t.Q6J("ngIf",i.scanState),t.xp6(1),t.Q6J("ngIf",!i.scanState),t.xp6(1),t.Q6J("ngModel",i.keyController.code),t.xp6(2),t.Q6J("fontSize","2.8rem")("styledPadding","2.4rem 6.6rem"),t.xp6(1),t.Q6J("volume",.05),t.xp6(1),t.Q6J("publicityList",i.publicity.getBottomPublicityList())("isTop",!1))},dependencies:[d.O5,y.Fj,y.JJ,y.On,T,H,S,F],styles:[".scan_container[_ngcontent-%COMP%]{position:relative;background-color:gray;width:100%}.container-menu[_ngcontent-%COMP%]{position:relative;height:71%;width:100%;background-color:#000}.scan-shadow[_ngcontent-%COMP%]{height:71%;width:100%;position:absolute;background-color:#000000d4;z-index:2}.scan_menu-container[_ngcontent-%COMP%]{position:relative;height:70vh;width:100%;display:flex;flex-direction:column;align-items:center;gap:3rem;z-index:3}.scan_title[_ngcontent-%COMP%]{margin:0;font-size:3.8rem}.menu-container_img-container[_ngcontent-%COMP%]{width:39rem;height:19rem;min-height:4rem;margin:0 1rem 1rem 0}.menu-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#fff;font-size:3.8rem;gap:2.4rem;margin-top:25px}.menu-container_img[_ngcontent-%COMP%]{border-radius:25px}.explication-text[_ngcontent-%COMP%]{padding:0 2rem;line-height:initial;text-align:center;width:83%}.menu-container_scan-img-container[_ngcontent-%COMP%]{min-height:16rem;width:19rem}.menu__input[_ngcontent-%COMP%]{border:5px solid red;outline:none;border-radius:33px;background-color:#000;color:#fff;padding:1rem .5rem;width:37rem;font-size:2.8rem}p[_ngcontent-%COMP%], figure[_ngcontent-%COMP%]{margin:0}img[_ngcontent-%COMP%]{width:100%;height:100%}"]}),n})(),it=(()=>{class n{constructor(e,i){this.gameLogicService=e,this.confirmDialog=i,this.columna1=[1,2,3,4,5,6,7,8,9,10],this.columna2=[5,6,7,8,9,10,1,2,3,4],this.columna3=[3,4,5,6,7,8,9,10,1,2],this.widthImage=270,this.animationCountCol1=4,this.disabledPlayButton=!1}startGame(e,i,o){if(this.gameLogicService.winFirstTime=!1,this.gameLogicService.attempts>0){if(this.disabledPlayButton=!0,this.gameLogicService.winner){const a=Math.floor(9*Math.random())+1,s=setInterval(()=>{let c=-9*this.widthImage;if(this.animationCountCol1>0)this.animationCountCol1-=1,e.style.transform=`translateY(${c}px)`,e.style.transition="transform 2s cubic-bezier(.17,.67,.83,.67)",e.style.filter="blur(3px)",i.style.transform=`translateY(${c}px)`,i.style.transition="transform 2s cubic-bezier(.17,.67,.83,.67)",i.style.filter="blur(3px)",o.style.transform=`translateY(${c}px)`,o.style.transition="transform 2s cubic-bezier(.17,.67,.83,.67)",o.style.filter="blur(3px)",setTimeout(()=>{this.translateToBegining(e,i,o)},2e3);else{let p,_,u=(a-1)*this.widthImage*-1;p=a>=5?(a-5)*this.widthImage*-1:(a+5)*this.widthImage*-1,_=a>=3?(a-3)*this.widthImage*-1:(a+7)*this.widthImage*-1,this.translateToBegining(e,i,o),e.style.transform=`translateY(${u}px)`,e.style.transition="transform 1s cubic-bezier(.17,.67,.83,.67)",e.style.filter="blur(0px)",i.style.transform=`translateY(${p}px)`,i.style.transition="transform 1s cubic-bezier(.17,.67,.83,.67)",i.style.filter="blur(0px)",o.style.transform=`translateY(${_}px)`,o.style.transition="transform 1s cubic-bezier(.17,.67,.83,.67)",o.style.filter="blur(0px)",this.animationCountCol1=5,this.disabledPlayButton=!1,this.gameLogicService.winFirstTime=!0,this.confirmDialog.result_game({title:"HAS GANADO!!!",image:this.gameLogicService.winAwardImage}),clearInterval(s)}},2030)}else{const a=setInterval(()=>{let s=-9*(this.widthImage+0);if(this.animationCountCol1>0)this.animationCountCol1-=1,e.style.transform=`translateY(${s}px)`,e.style.transition="transform 2s cubic-bezier(.17,.67,.83,.67)",e.style.filter="blur(3px)",i.style.transform=`translateY(${s}px)`,i.style.transition="transform 2s cubic-bezier(.17,.67,.83,.67)",i.style.filter="blur(3px)",o.style.transform=`translateY(${s}px)`,o.style.transition="transform 2s cubic-bezier(.17,.67,.83,.67)",o.style.filter="blur(3px)",setTimeout(()=>{this.translateToBegining(e,i,o)},2e3);else{let c=Math.floor(Math.random()*this.columna1.length),u=this.widthImage*c;e.style.transform=`translateY(-${u}px)`,e.style.transition="transform 1s ",e.style.filter="blur(0px)",i.style.transform=`translateY(-${u}px)`,i.style.transition="transform 1s ",i.style.filter="blur(0px)",o.style.transform=`translateY(-${u}px)`,o.style.transition="transform 1s ",o.style.filter="blur(0px)",this.animationCountCol1=5,this.disabledPlayButton=!1,clearInterval(a),this.confirmDialog.result_game({title:"INTENTA OTRA VEZ!!!",image:"../../../../../assets/img/loseImage.png"})}},2030)}this.gameLogicService.setWinnerState(!1),this.gameLogicService.decreaseAttemptCount()}else this.confirmDialog.end_game({title:"Se termin\xf3 la partida",image:"./assets/img/gameover.png"})}translateToBegining(e,i,o){e.style.transform="translateY(0px)",e.style.transition="transform 0s",i.style.transform="translateY(231px)",i.style.transition="transform 0s ",o.style.transform="translateY(231px)",o.style.transition="transform 0s "}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f),t.LFG(w.D))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nt(n,r){1&n&&(t.TgZ(0,"p",27),t._uU(1,"No te quedan m\xe1s Giros!"),t.qZA())}function ot(n,r){1&n&&(t.TgZ(0,"p",27),t._uU(1,"Disponible 1 Giro m\xe1s!"),t.qZA())}function at(n,r){if(1&n&&(t.TgZ(0,"p",27),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Disponible ",e.gameLogicService.attempts," Giros m\xe1s! ")}}function rt(n,r){if(1&n&&(t.TgZ(0,"p",27),t._uU(1),t.qZA(),t.TgZ(2,"audio",30),t._UZ(3,"source",31),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Disponible ",e.gameLogicService.attempts," Giros m\xe1s! ")}}function st(n,r){if(1&n&&(t.YNc(0,at,2,1,"p",28),t.YNc(1,rt,4,1,"ng-template",null,29,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",0==i.gameLogicService.winFirstTime)("ngIfElse",e)}}function lt(n,r){if(1&n&&(t.TgZ(0,"figure",32),t._UZ(1,"img",33),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.styles.get_image_winner(),t.LSH)}}function ct(n,r){if(1&n&&(t.TgZ(0,"figure",34),t._UZ(1,"img",35),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH)}}function mt(n,r){if(1&n&&(t.TgZ(0,"figure",34),t._UZ(1,"img",35),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH)}}function ut(n,r){if(1&n&&(t.TgZ(0,"figure",34),t._UZ(1,"img",35),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH)}}function gt(n,r){1&n&&(t.TgZ(0,"div")(1,"audio",30),t._UZ(2,"source",36),t.qZA()())}const dt=function(){return{color:"styles.color_text"}},pt=function(){return{color:"styles.get_color_text()"}},ht=[{path:"",component:q},{path:"scan",component:et,canActivate:[P],data:{Validate_game:"juego_scan"}},{path:"play",component:(()=>{class n{constructor(e,i,o,a,s,c,u){this.publicity=e,this.styles=i,this.animation=o,this.theme=a,this.publicityGame=s,this.gameLogicService=c,this.probalilitySrv=u,this.informationText="A JUGAR!",this.slot_music=!1,this.attemps=0,this.probability={}}ngOnInit(){this.probalilitySrv.getProbabilites().subscribe(e=>{this.attemps=e.attempts_limit})}doSomething(){sessionStorage.removeItem("juego_play")}music(){console.log(this.attemps),this.attemps>0&&(this.slot_music=!0,this.attemps-=1,setTimeout(()=>{this.slot_music=!1},7e3))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.E),t.Y36(v.T),t.Y36(it),t.Y36(I),t.Y36(M.D),t.Y36(f),t.Y36(J.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-play-view"]],decls:32,vars:22,consts:[["contenteditable","true",1,"container-fullscreen","p-0","m-0",3,"beforeunload"],[3,"publicityList"],[1,"container-menu"],["height","25rem",3,"urlImage","isBackground"],[1,"scan-shadow"],[1,"scan_menu-container"],[1,"menu-container_img-container"],["height","22rem",3,"urlImage","isHome"],[1,"info-game__text",3,"ngStyle"],[1,"information-game-container",3,"ngPlural","ngStyle"],["ngPluralCase","=0"],["class","info-game__text","ngPluralCase","=1"],["class","info-game__text","ngPluralCase","other"],[1,"spinner__container"],["class","winner-container",4,"ngIf"],[1,"award-box-container"],["alt","cajon-premios",1,"awards-box",3,"src"],[1,"awards-container"],[1,"awards-column"],["col1",""],["class","award-image-container",4,"ngFor","ngForOf"],["col2",""],["col3",""],["title","Girar",1,"mb-2","container_play-btn",3,"disabled","fontSize","styledPadding","click"],[4,"ngIf"],["autoplay","","loop","","controls","None","hidden","","src","./assets/audio/playing_music.mp3",3,"volume"],[3,"publicityList","isTop"],[1,"info-game__text"],["class","info-game__text",4,"ngIf","ngIfElse"],["winText",""],["controls","None","hidden","","autoplay",""],["src","./assets/audio/win.mp3","type","audio/mp3"],[1,"winner-container"],["alt"," winner-img",3,"src"],[1,"award-image-container"],["alt","publicityLogo",3,"src"],["src","./assets/audio/tragaperras.mp3","type","audio/mp3"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.NdJ("beforeunload",function(){return i.doSomething()},!1,t.Jf7),t._UZ(1,"app-publicity",1),t.TgZ(2,"div",2),t._UZ(3,"app-logo",3)(4,"div",4),t.TgZ(5,"div",5)(6,"div",6),t._UZ(7,"app-logo",7),t.qZA(),t.TgZ(8,"p",8),t._uU(9," A JUGAR!!! "),t.qZA(),t.TgZ(10,"div",9),t.YNc(11,nt,2,0,"ng-template",10),t.YNc(12,ot,2,0,"ng-template",11),t.YNc(13,st,3,2,"ng-template",12),t.qZA(),t.TgZ(14,"div",13),t.YNc(15,lt,2,1,"figure",14),t.TgZ(16,"figure",15),t._UZ(17,"img",16),t.qZA(),t.TgZ(18,"div",17)(19,"div",18,19),t.YNc(21,ct,2,1,"figure",20),t.qZA(),t.TgZ(22,"div",18,21),t.YNc(24,mt,2,1,"figure",20),t.qZA(),t.TgZ(25,"div",18,22),t.YNc(27,ut,2,1,"figure",20),t.qZA()()(),t.TgZ(28,"app-generic-button",23),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(20),c=t.MAs(23),u=t.MAs(26);return i.animation.startGame(s,c,u),t.KtG(i.music())}),t.YNc(29,gt,3,0,"div",24),t.qZA()()(),t._UZ(30,"audio",25)(31,"app-publicity",26),t.qZA()}2&e&&(t.xp6(1),t.Q6J("publicityList",i.publicity.getTopPublicityList()),t.xp6(2),t.Q6J("urlImage",i.styles.get_image_logo_game())("isBackground",!0),t.xp6(4),t.Q6J("urlImage",i.styles.get_image_logo_game())("isHome",!1),t.xp6(1),t.Q6J("ngStyle",t.DdM(20,dt)),t.xp6(2),t.Q6J("ngPlural",i.gameLogicService.attempts)("ngStyle",t.DdM(21,pt)),t.xp6(5),t.Q6J("ngIf",1==i.gameLogicService.winFirstTime),t.xp6(2),t.Q6J("src",i.styles.get_image_machine_game(),t.LSH),t.xp6(4),t.Q6J("ngForOf",i.theme.publicityGameList),t.xp6(3),t.Q6J("ngForOf",i.theme.publicityGameListCol2),t.xp6(3),t.Q6J("ngForOf",i.theme.publicityGameListCol3),t.xp6(1),t.Q6J("disabled",i.animation.disabledPlayButton)("fontSize","2.8rem")("styledPadding","2.4rem 6.6rem"),t.xp6(1),t.Q6J("ngIf",i.slot_music),t.xp6(1),t.Q6J("volume",.05),t.xp6(1),t.Q6J("publicityList",i.publicity.getBottomPublicityList())("isTop",!1))},dependencies:[d.sg,d.O5,d.PC,d.iq,d.zE,T,S,F],styles:[".scan_menu-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;display:flex;flex-direction:column;align-items:center;gap:4.5rem;z-index:3}.container-menu[_ngcontent-%COMP%]{position:relative;height:70vh;width:100%;background-color:#000}.scan-shadow[_ngcontent-%COMP%]{height:70vh;width:100%;position:absolute;background-color:#000000d4;z-index:2}.menu-container_img-container[_ngcontent-%COMP%]{width:39rem;height:19rem;min-height:4rem;margin:0 1rem 1rem 0}.info-game__text[_ngcontent-%COMP%]{color:#fff;font-size:4rem}.information-game-container[_ngcontent-%COMP%]{background-color:#ffaf00;width:100%;display:flex;justify-content:center;height:4rem;align-items:center}.spinner__container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;height:47%;width:100%;max-height:484px}.awards-container[_ngcontent-%COMP%]{position:absolute;top:80px;height:338px;left:calc(50% - 374px);display:flex;justify-content:center;align-items:center;gap:6.5rem;z-index:4;overflow:hidden}.awards-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:110px;height:160px;animation-duration:4s;animation-name:slidevertical;animation-iteration-count:infinite}@keyframes slidevertical{}.award-image-container[_ngcontent-%COMP%]{min-height:160px;width:187px}.award-box-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;max-width:1309px}.winner-container[_ngcontent-%COMP%]{position:absolute;z-index:5;top:-240px;width:950px;height:900px}.container_play-btn[_ngcontent-%COMP%]{z-index:6}p[_ngcontent-%COMP%], figure[_ngcontent-%COMP%]{margin:0}img[_ngcontent-%COMP%]{width:100%;height:100%}"]}),n})(),canActivate:[P],data:{Validate_game:"juego_play"}}];let _t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(ht),h.Bz]}),n})();var ft=l(5906);let yt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,_t,ft.m,C.JF,y.u5]}),n})()}}]);